/*
  LeetCode 2823. Deep Object Filter

  –£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:
  –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é deepFilter(obj, fn), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤ obj
  –∏ —Ñ—É–Ω–∫—Ü–∏—é fn. –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤) filteredObject,
  –≤ –∫–æ—Ç–æ—Ä—É—é –≤–æ–π–¥—É—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö fn –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true.

  –ü—Ä–∞–≤–∏–ª–∞ –≥–ª—É–±–æ–∫–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞:
  - –ï—Å–ª–∏ obj ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–∂–¥–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ:  
    ‚Ä¢ –ï—Å–ª–∏ fn(value) === true, –≤–∫–ª—é—á–∞–π—Ç–µ –ø–∞—Ä—É –∫–ª—é—á‚Äì–∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.  
    ‚Ä¢ –ï—Å–ª–∏ fn(value) === false, —É–¥–∞–ª—è–π—Ç–µ —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ.  
    ‚Ä¢ –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º, –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ.
  - –ï—Å–ª–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–≤–æ–π—Å—Ç–≤ –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –∏–ª–∏ –º–∞—Å—Å–∏–≤–µ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∏ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞,
    —Ç–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤ —Ç–æ–∂–µ —É–¥–∞–ª—è–µ—Ç—Å—è.
  - –ï—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–∞–±–æ—Ç—ã deepFilter –≤–µ—Å—å obj –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º (–Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞),
    —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å undefined.

  –ü—Ä–∏–º–µ—Ä—ã:

  1) –ß–∏—Å—Ç—ã–π –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª
    –í–≤–æ–¥:
      obj = [-5, -4, -3, -2, -1,  0, 1]
      fn  = (x) => x > 0
    –í—ã–≤–æ–¥: [1]
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
      –û—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è > 0.

  2) –û–±—ä–µ–∫—Ç —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –∏ —á–∏—Å–ª–∞–º–∏
    –í–≤–æ–¥:
      obj = {
        "a": 1,
        "b": "2",
        "c": 3,
        "d": "4",
        "e": 5,
        "f": 6,
        "g": { "a": 1 }
      }
      fn  = (x) => typeof x === "string"
    –í—ã–≤–æ–¥: { "b": "2", "d": "4" }
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
      –û—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –í–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç g —É–¥–∞–ª—è–µ—Ç—Å—è,
      —Ç–∞–∫ –∫–∞–∫ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ–Ω –ø—É—Å—Ç.

  3) –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã
    –í–≤–æ–¥:
      obj = [-1, [-1, -1, 5, -1, 10], -1, [-1], [-5]]
      fn  = (x) => x > 0
    –í—ã–≤–æ–¥: [[5, 10]]
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
      –û—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ > 0 –≤ –æ–¥–Ω–æ–º –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤.
      –ü—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã —É–¥–∞–ª—è—é—Ç—Å—è.

  4) –ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –º–∞—Å—Å–∏–≤–æ–≤
    –í–≤–æ–¥:
      obj = [[[[5]]]]
      fn  = (x) => Array.isArray(x)
    –í—ã–≤–æ–¥: undefined
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
      fn –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ
      –º–∞—Å—Å–∏–≤–∞ –±–µ–∑ —á–∏—Å–µ–ª, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –Ω–µ—Ç –∑–Ω–∞—á–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  - fn ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ.
  - obj ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON-–æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤.
  - –î–ª–∏–Ω–∞ JSON.stringify(obj) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 2 –¥–æ 10^5 —Å–∏–º–≤–æ–ª–æ–≤.
*/



/* 
  –û–±—ä—è–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é deepFilter, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤ –∏ —Ñ—É–Ω–∫—Ü–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ fn 
*/
function deepFilter(obj, fn) {
  /* 
    –û–±—ä—è–≤–ª—è–µ–º –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é dfs –¥–ª—è –æ–±—Ö–æ–¥–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö 
  */
  function dfs(data) {
    /* 
      –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–æ–º 
    */
    if (Array.isArray(data)) {
      /* 
        –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –Ω–µ undefined 
      */
      const result = [];
      for (const item of data) {
        const filteredValue = dfs(item);

        if (filteredValue === undefined) continue;

        result.push(filteredValue);
      }

      /* 
        –ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ, –∏–Ω–∞—á–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö 
      */
      return result.length ? result : undefined;
    }

    /*
      –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—ä–µ–∫—Ç–æ–º (–Ω–µ null –∏ –Ω–µ –º–∞—Å—Å–∏–≤–æ–º) 
    */
    if (typeof data === 'object' && data !== null) {
      /* 
        –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ 
      */
      const result = {};

      /* 
        –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ 
      */
      for (const key in data) {
        /*
          –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ 
        */
        if (!Object.hasOwn(data, key)) continue;

        /* 
          –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ 
        */
        const filteredValue = dfs(data[key]);
        /* 
          –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –µ–≥–æ
        */
        if (filteredValue === undefined) continue;

        /* 
          –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º –æ–±—ä–µ–∫—Ç–µ 
        */
        result[key] = filteredValue;
      }

      /* 
        –ï—Å–ª–∏ –≤ result –Ω–µ—Ç —Å–≤–æ–π—Å—Ç–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º undefined, –∏–Ω–∞—á–µ result
      */
      return isObjectEmpty(result) ? undefined : result;
    }

    /* 
      –î–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é fn: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ undefined 
    */
    return fn(data) ? data : undefined;
  };

  /* 
    –ó–∞–ø—É—Å–∫–∞–µ–º DFS-–æ–±—Ö–æ–¥ —Å –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ç–æ–≥ 
  */
  return dfs(obj);
}

/* 
  –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É 
*/
function isObjectEmpty(obj) {
  /* 
    –ï—Å–ª–∏ –≤ –æ–±—ä–µ–∫—Ç–µ –µ—Å—Ç—å —Ö–æ—Ç—å –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false 
  */
  for (const _ in obj) return false;
  /* 
    –ò–Ω–∞—á–µ –æ–±—ä–µ–∫—Ç –ø—É—Å—Ç–æ–π ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true 
  */
  return true;
}









// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è assert, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–∞—è –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}

/*
  –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ deepFilter.
*/
const tests = [
  {
    description: "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é > 1",
    async test() {
      const input = { a: 1, b: 2, c: 3 };
      const fn = x => x > 1;
      const resultult = deepFilter(input, fn);
      const expected = { b: 2, c: 3 };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é > 2",
    async test() {
      const input = { a: 1, b: { c: 2, d: 3 } };
      const fn = x => x > 2;
      const resultult = deepFilter(input, fn);
      const expected = { b: { d: 3 } };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —á—ë—Ç–Ω—ã—Ö —á–∏—Å–µ–ª",
    async test() {
      const input = [1, 2, 3, 4];
      const fn = x => x % 2 === 0;
      const resultult = deepFilter(input, fn);
      const expected = [2, 4];
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é > 2",
    async test() {
      const input = [1, [2, 3], 4];
      const fn = x => x > 2;
      const resultult = deepFilter(input, fn);
      const expected = [[3], 4];
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–°–º–µ—à–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –º–∞—Å—Å–∏–≤–æ–º –∏ —á–∏—Å–ª–æ–º",
    async test() {
      const input = { arr: [1, 2, 3], num: 2 };
      const fn = x => x >= 2;
      const resultult = deepFilter(input, fn);
      const expected = { arr: [2, 3], num: 2 };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–í—Å–µ–≥–¥–∞ true ‚Äì –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é",
    async test() {
      const input = { x: 1, y: [2, { z: 3 }] };
      const fn = () => true;
      const resultult = deepFilter(input, fn);
      const expected = input;
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å –ø–æ–ª–Ω—É—é –∫–æ–ø–∏—é ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–í—Å–µ–≥–¥–∞ false ‚Äì –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å undefined",
    async test() {
      const input = { a: 1, b: [2, 3] };
      const fn = () => false;
      const resultult = deepFilter(input, fn);
      assert(
        resultult === undefined,
        `–û–∂–∏–¥–∞–ª–æ—Å—å undefined, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äì —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —á–∏—Å–ª–∞–º > 1",
    async test() {
      const input = { items: [{ a: 1 }, { b: 2 }, { c: 3 }] };
      const fn = x => x > 1;
      const resultult = deepFilter(input, fn);
      const expected = { items: [{ b: 2 }, { c: 3 }] };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã ‚Äì –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞",
    async test() {
      const input = { a: null, b: "hello", c: 411 };
      const fn = x => typeof x === "number";
      const resultult = deepFilter(input, fn);
      const expected = { c: 411 };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  },
  {
    description: "–£–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π",
    async test() {
      const input = { a: [], b: {}, c: 1 };
      const fn = x => x === 1;
      const resultult = deepFilter(input, fn);
      const expected = { c: 1 };
      assert(
        JSON.stringify(resultult) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(resultult)}`
      );
    }
  }
];

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
(async () => {
  console.log("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è deepFilter...");
  let hasErrors = false;

  for (let i = 0; i < tests.length; i++) {
    try {
      await tests[i].test();
      console.log(`‚úîÔ∏è  –¢–µ—Å—Ç ${i + 1} –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
    } catch (e) {
      hasErrors = true;
      console.error(`‚ùå –¢–µ—Å—Ç ${i + 1} –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
      console.error(e);
    }
  }

  if (hasErrors) {
    console.error("‚ùó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π.");
  } else {
    console.log("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è deepFilter –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.");
  }
})();
