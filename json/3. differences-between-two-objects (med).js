/*
  LeetCode 2700: Difference Between Two Objects

  –û–ø–∏—Å–∞–Ω–∏–µ:
  –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤–∞ ‚Äî obj1 –∏ obj2, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∏—Ö —Ä–∞–∑–ª–∏—á–∏—è. –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –≤—ã—è–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –∫–ª—é—á–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–µ –≤ obj1 –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ obj2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞: [–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj1, –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj2]. –ö–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –æ–±—ä–µ–∫—Ç. –ü—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –¥–≤—É—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏–Ω–¥–µ–∫—Å—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –∏—Ö –∫–ª—é—á–∏. –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —ç—Ç–æ –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –≥–¥–µ –∫–∞–∂–¥–æ–µ "–ª–∏—Å—Ç–≤–µ–Ω–Ω–æ–µ" –∑–Ω–∞—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–∏–π. –ú–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –æ–±–∞ –æ–±—ä–µ–∫—Ç–∞ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–∑–æ–≤–∞ JSON.parse.

  –ü—Ä–∏–º–µ—Ä 1:
  –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    obj1 = {}
    obj2 = { "a": 1, "b": 2 }
  –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    {}
  –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –í obj1 –Ω–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ù–æ–≤—ã–µ –∫–ª—é—á–∏ "a" –∏ "b" –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ obj2 –∏ –ø–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è.

  –ü—Ä–∏–º–µ—Ä 2:
  –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    obj1 = { "a": 1, "v": 3, "x": [], "z": { "a": null } }
    obj2 = { "a": 2, "v": 4, "x": [], "z": { "a": 2 } }
  –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    { "a": [1, 2], "v": [3, 4], "z": { "a": [null, 2] } }
  –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á–∞–º "a", "v" –∏ "z" –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –ù–∞–ø—Ä–∏–º–µ—Ä, "a" –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å 1 –Ω–∞ 2, –∞ –≤ –æ–±—ä–µ–∫—Ç–µ "z" –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É "a" –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å null –Ω–∞ 2.

  –ü—Ä–∏–º–µ—Ä 3:
  –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    obj1 = { "a": 5, "v": 6, "z": [1, 2, 4, [2, 5, 7]] }
    obj2 = { "a": 5, "v": 7, "z": [1, 2, 3, [1]] }
  –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    { "v": [6, 7], "z": { "2": [4, 3], "3": { "0": [2, 1] } } }
  –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ö–ª—é—á "a" –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤ –∫–ª—é—á–µ "v" (6 ‚Üí 7) –∏ –≤ –º–∞—Å—Å–∏–≤–µ "z": —ç–ª–µ–º–µ–Ω—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º 2 –∏–∑–º–µ–Ω–∏–ª—Å—è —Å 4 –Ω–∞ 3, –∞ –≤ —ç–ª–µ–º–µ–Ω—Ç–µ —Å –∏–Ω–¥–µ–∫—Å–æ–º 3 –ø–æ–¥ –∏–Ω–¥–µ–∫—Å–æ–º 0 –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å 2 –Ω–∞ 1.

  –ü—Ä–∏–º–µ—Ä 4:
  –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    obj1 = { "a": { "b": 1 } }
    obj2 = { "a": [5] }
  –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    { "a": [{ "b": 1 }, [5]] }
  –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á—É "a" –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã (–æ–±—ä–µ–∫—Ç –ø—Ä–æ—Ç–∏–≤ –º–∞—Å—Å–∏–≤–∞), –ø–æ—ç—Ç–æ–º—É –∏—Ö —Ä–∞–∑–ª–∏—á–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ [–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj1, –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj2].

  –ü—Ä–∏–º–µ—Ä 5:
  –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    obj1 = { "a": [1, 2, {}], "b": false }
    obj2 = { "b": false, "a": [1, 2, {}] }
  –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    {}
  –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∞–∑–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π, –æ–±—ä–µ–∫—Ç—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏, –ø–æ—ç—Ç–æ–º—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç.

  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  - obj1 –∏ obj2 —è–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ JSON-–æ–±—ä–µ–∫—Ç–∞–º–∏ –∏–ª–∏ –º–∞—Å—Å–∏–≤–∞–º–∏.
  - 2 <= JSON.stringify(obj1).length <= 10^4
  - 2 <= JSON.stringify(obj2).length <= 10^4
*/


// –§—É–Ω–∫—Ü–∏—è objDiff —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç,
// —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–æ–ª—å–∫–æ —Ç–µ –∫–ª—é—á–∏, –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –≤ –æ–±–æ–∏—Ö —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö.
function objDiff(obj1, obj2) {
  // –ï—Å–ª–∏ —Ç–∏–ø—ã –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–ª–∏—á–∞—é—Ç—Å—è, —Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—á–µ–≤–∏–¥–Ω—ã.
  // –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî –º–∞—Å—Å–∏–≤, –∞ –¥—Ä—É–≥–æ–π ‚Äî –æ–±—ä–µ–∫—Ç –∏–ª–∏ –ø—Ä–∏–º–∏—Ç–∏–≤,
  // –ø–æ—ç—Ç–æ–º—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ö –∫–∞–∫ –º–∞—Å—Å–∏–≤ [–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj1, –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj2].
  if (type(obj1) !== type(obj2)) return [obj1, obj2];

  // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º (—Ç–æ –µ—Å—Ç—å —ç—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä —á–∏—Å–ª–æ, —Å—Ç—Ä–æ–∫–∞, boolean),
  // —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.
  // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–≤–Ω—ã, –∑–Ω–∞—á–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç.
  // –ï—Å–ª–∏ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ —Å –æ–±–æ–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
  if (!isObject(obj1)) {
    return obj1 === obj2 ? {} : [obj1, obj2];
  }

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ obj1 –∏ —Ç–∞–∫–∂–µ –µ—Å—Ç—å –≤ obj2.
  // –°–æ–≥–ª–∞—Å–Ω–æ —É—Å–ª–æ–≤–∏—é –∑–∞–¥–∞—á–∏, –∫–ª—é—á–∏, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.
  const commonKeys = [];
  for (const key in obj1) {
    if (!Object.hasOwn(obj1, key)) continue;
    if (!Object.hasOwn(obj2, key)) continue;
    
    commonKeys.push(key);
  }

  // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç diff –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π.
  const diff = {};

  // –ò—Ç–µ—Ä–∏—Ä—É–µ–º—Å—è –ø–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–º –æ–±—â–∏–º –∫–ª—é—á–∞–º.
  for (const key of commonKeys) {
    // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —ç—Ç–æ–º—É –∫–ª—é—á—É.
    //   1. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–≤–Ω—ã: –ï—Å–ª–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ obj1[key] –∏ obj2[key] —Ä–∞–≤–Ω—ã
    //      (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–∞ —á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏, –∏–ª–∏ –¥–∞–∂–µ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã), —Ñ—É–Ω–∫—Ü–∏—è objDiff
    //      –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç {}. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ subDiff —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—É—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º,
    //      —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è, —á—Ç–æ —Ä–∞–∑–ª–∏—á–∏–π –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É –Ω–µ—Ç.
    //   2. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç–ª–∏—á–∞—é—Ç—Å—è: –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç, —Ñ—É–Ω–∫—Ü–∏—è objDiff –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
    //      –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–∏–π. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å:
    //        - –ú–∞—Å—Å–∏–≤ –≤–∏–¥–∞ [–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj1, –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ obj2], –µ—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è
    //          –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
    //        - –û–±—ä–µ–∫—Ç —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ—Ç–ª–∏—á–∏—è–º–∏, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è
    //          –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏–ª–∏ –º–∞—Å—Å–∏–≤–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–∞–∫–æ–º-–ª–∏–±–æ —É—Ä–æ–≤–Ω–µ
    //          –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.
    const subDiff = objDiff(obj1[key], obj2[key]);

    // –ï—Å–ª–∏ subDiff —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–ª—é—á, –∑–Ω–∞—á–∏—Ç, –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
    // –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ (—Ç–æ –µ—Å—Ç—å, subDiff –Ω–µ –ø—É—Å—Ç–æ–π), –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ: diff[key] = subDiff;.
    // –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º –æ–±—ä–µ–∫—Ç–µ diff –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–ª—é—á–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ä–∞–∑–ª–∏—á–∏–π.
    if (!isObjectEmpty(subDiff)) {
      diff[key] = subDiff;
    }
  };

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å–µ —Ä–∞–∑–ª–∏—á–∏—è.
  return diff;
}

// –§—É–Ω–∫—Ü–∏—è type –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è,
// –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ Object.prototype.toString. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–∞—Å—Å–∏–≤–∞ –≤–µ—Ä–Ω–µ—Ç—Å—è "Array",
// –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ ‚Äî "Object", –¥–ª—è —á–∏—Å–ª–∞ ‚Äî "Number" –∏ —Ç.–¥.
function type(obj) {
  return Object.prototype.toString.call(obj).slice(8, -1);
}

// –§—É–Ω–∫—Ü–∏—è isObject –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–º, –∏—Å–∫–ª—é—á–∞—è null.
// –≠—Ç–æ –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ typeof null –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "object", –∞ null –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.
// –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –¥–ª—è –ª—é–±—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –º–∞—Å—Å–∏–≤—ã.
// –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –≤ JavaScript –º–∞—Å—Å–∏–≤—ã –∏–º–µ—é—Ç —Ç–∏–ø "object". 
// –î–ª—è –∑–∞–¥–∞—á–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–∏ –º–∞—Å—Å–∏–≤–æ–≤) –Ω–∞–º –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ, 
// –ø–æ—ç—Ç–æ–º—É –º–∞—Å—Å–∏–≤—ã —Ç–∞–∫–∂–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É.
function isObject(obj) {
  return typeof obj === "object" && obj !== null;
}

// isObjectEmpty –≤–µ—Ä–Ω—ë—Ç true –∫–∞–∫ –¥–ª—è ¬´–ø—É—Å—Ç–æ–≥–æ¬ª –æ–±—ä–µ–∫—Ç–∞, —Ç–∞–∫ –∏ –¥–ª—è ¬´–ø—É—Å—Ç–æ–≥–æ¬ª –º–∞—Å—Å–∏–≤–∞ ‚Äî 
// –≤–µ–¥—å –≤ JS –º–∞—Å—Å–∏–≤—ã –ø–æ —Å—É—Ç–∏ –æ–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏.
//
// –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
// - –í —Å–ª—É—á–∞–µ –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —É –Ω–µ–≥–æ –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ—á–∏—Å–ª–∏–º—ã—Ö —Å–≤–æ–π—Å—Ç–≤-–∏–Ω–¥–µ–∫—Å–æ–≤ 
//   (–∏ —Å–≤–æ–π—Å—Ç–≤–æ length –Ω–µ–ø–µ—Ä–µ—á–∏—Å–ª–∏–º–æ–µ), –∑–Ω–∞—á–∏—Ç —Ü–∏–∫–ª –Ω–µ –Ω–∞–π–¥—ë—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ key 
//   –∏ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç return true.
// - –ï—Å–ª–∏ –≤ –º–∞—Å—Å–∏–≤–µ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç (–∏–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ, 
//   –Ω–∞–ø—Ä–∏–º–µ—Ä arr.foo = 5), —Ü–∏–∫–ª –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–º –∂–µ –∫–ª—é—á–µ –∏ –≤–µ—Ä–Ω—ë—Ç false.
function isObjectEmpty(obj) {
  for (const _ in obj) return false;
  return true;
}







// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è assert, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–∞—è –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}

// –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ objDiff.
const tests = [
  {
    description: "–ü—Ä–∏–º–∏—Ç–∏–≤—ã: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —á–∏—Å–ª–∞",
    async test() {
      const result = objDiff(1, 1);
      const expected = {};
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ü—Ä–∏–º–∏—Ç–∏–≤—ã: —Ä–∞–∑–Ω—ã–µ —á–∏—Å–ª–∞",
    async test() {
      const result = objDiff(1, 2);
      const expected = [1, 2];
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ü—Ä–∏–º–∏—Ç–∏–≤—ã: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏",
    async test() {
      const result = objDiff("hello", "hello");
      const expected = {};
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ü—Ä–∏–º–∏—Ç–∏–≤—ã: —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏",
    async test() {
      const result = objDiff("hello", "world");
      const expected = ["hello", "world"];
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã: –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞",
    async test() {
      const obj1 = { a: 1, b: 2 };
      const obj2 = { a: 1, b: 2 };
      const result = objDiff(obj1, obj2);
      const expected = {};
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–û–±—ä–µ–∫—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏",
    async test() {
      const obj1 = { a: 1, b: 2 };
      const obj2 = { a: 1, b: 3 };
      const result = objDiff(obj1, obj2);
      const expected = { b: [2, 3] };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã",
    async test() {
      const obj1 = { a: { b: 3, c: 4 } };
      const obj2 = { a: { b: 3, c: 5 } };
      const result = objDiff(obj1, obj2);
      const expected = { a: { c: [4, 5] } };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ú–∞—Å—Å–∏–≤—ã —Å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã",
    async test() {
      const obj1 = [1, 2, 3];
      const obj2 = [1, 2, 3];
      const result = objDiff(obj1, obj2);
      const expected = {};
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ú–∞—Å—Å–∏–≤—ã —Å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏: —Ä–∞–∑–ª–∏—á–∏—è –≤ —ç–ª–µ–º–µ–Ω—Ç–∞—Ö",
    async test() {
      const obj1 = [1, 2, 3];
      const obj2 = [1, 4, 3];
      const result = objDiff(obj1, obj2);
      // –†–∞–∑–Ω–∏—Ü–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤ –∏–Ω–¥–µ–∫—Å–µ "1"
      const expected = { "1": [2, 4] };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ú–∞—Å—Å–∏–≤—ã —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏",
    async test() {
      const obj1 = [{ a: 1 }, { b: 2 }];
      const obj2 = [{ a: 1 }, { b: 3 }];
      const result = objDiff(obj1, obj2);
      const expected = { "1": { b: [2, 3] } };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞",
    async test() {
      const obj1 = { a: { b: 1 } };
      const obj2 = { a: [5] };
      const result = objDiff(obj1, obj2);
      const expected = { a: [{ b: 1 }, [5]] };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∏–∑ —É—Å–ª–æ–≤–∏—è –∑–∞–¥–∞—á–∏)",
    async test() {
      const obj1 = { a: 1, v: 3, x: [], z: { a: null } };
      const obj2 = { a: 2, v: 4, x: [], z: { a: 2 } };
      const result = objDiff(obj1, obj2);
      const expected = { a: [1, 2], v: [3, 4], z: { a: [null, 2] } };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–ö–ª—é—á–∏, –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ",
    async test() {
      const obj1 = { a: 1 };
      const obj2 = { a: 2, b: 3 };
      const result = objDiff(obj1, obj2);
      // –ö–ª—é—á "b" –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ obj1
      const expected = { a: [1, 2] };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
  {
    description: "–°–ª–æ–∂–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –º–∞—Å—Å–∏–≤–∞–º–∏",
    async test() {
      const obj1 = {
        a: 1,
        b: {
          c: 3,
          d: [1, { e: 5 }, 3],
        },
        f: "test",
      };
      const obj2 = {
        a: 1,
        b: {
          c: 4,            // –ò–∑–º–µ–Ω–∏–ª–æ—Å—å
          d: [1, { e: 7 }, 3], // –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É 1
        },
        f: "test",
      };
      const result = objDiff(obj1, obj2);
      const expected = {
        b: {
          c: [3, 4],
          d: { "1": { e: [5, 7] } }
        }
      };
      assert(JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`);
    },
  },
];

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
(async () => {
  console.log("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ objDiff...");
  let hasErrors = false;
  for (let i = 0; i < tests.length; i++) {
    try {
      await tests[i].test(); // —Ç–µ—Å—Ç—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ, –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è objDiff —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
      console.log(`‚úîÔ∏è  –¢–µ—Å—Ç ${i + 1} –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
    } catch (e) {
      hasErrors = true;
      console.error(`‚ùå –¢–µ—Å—Ç ${i + 1} –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
      console.error(e);
    }
  }
  if (hasErrors) {
    console.error("‚ùó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π.");
  } else {
    console.log("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ objDiff –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.");
  }
})();
