/*
LeetCode 2675. Array of Objects to Matrix

–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:
------------------
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ (–∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–≤) –≤ –º–∞—Ç—Ä–∏—Ü—É.

–ü—Ä–∞–≤–∏–ª–∞:
1. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –º–∞—Å—Å–∏–≤ "arr", —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ –º–∞—Å—Å–∏–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏.
2. –ó–Ω–∞—á–µ–Ω–∏—è –≤ –æ–±—ä–µ–∫—Ç–∞—Ö/–º–∞—Å—Å–∏–≤–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —á–∏—Å–ª–∞–º–∏, —Å—Ç—Ä–æ–∫–∞–º–∏, –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–ª–∏ null.
3. –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–π –º–∞—Ç—Ä–∏—Ü—ã "m" –¥–æ–ª–∂–Ω–∞ —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤:
   - –î–ª—è –Ω–µ–≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ ‚Äî —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤–æ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–∞—Ö.
   - –î–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ —Å—Ç—Ä–æ—è—Ç—Å—è –ø—É—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É "."
     (–¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, "0.a").
4. –ö–∞–∂–¥–∞—è –ø–æ—Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∏–∑ "arr". –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —è—á–µ–π–∫–∏:
   - –ó–Ω–∞—á–µ–Ω–∏–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏—é —Å—Ç–æ–ª–±—Ü–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ –∫–ª—é—á–∞/–ø—É—Ç–∏), –µ—Å–ª–∏ –æ–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —ç–ª–µ–º–µ–Ω—Ç–µ.
   - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ("") –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞.
5. –ù–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º (—Å–ª–æ–≤–∞—Ä–Ω–æ–º) –ø–æ—Ä—è–¥–∫–µ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é.

–ü—Ä–∏–º–µ—Ä—ã:
---------
–ü—Ä–∏–º–µ—Ä 1:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  arr = [ { "b": 1, "a": 2 }, { "b": 3, "a": 4 } ]
–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: [ ["a", "b"], [2, 1], [4, 3] ]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ "a" –∏ "b" –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏.

–ü—Ä–∏–º–µ—Ä 2:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  arr = [ { "a": 1, "b": 2 }, { "c": 3, "d": 4 }, {} ]
–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: [ ["a", "b", "c", "d"], [1, 2, "", ""], ["", "", 3, 4], ["", "", "", ""] ]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∫–ª—é—á–∏ "a", "b", "c" –∏ "d"; –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ "".

–ü—Ä–∏–º–µ—Ä 3:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  arr = [ { "a": { "b": 1, "c": 2 } }, { "a": { "b": 3, "d": 4 } } ]
–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: [ ["a.b", "a.c", "a.d"], [1, 2, ""], [3, "", 4] ]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –î–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∫–ª—é—á–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è "a.b", "a.c" –∏ "a.d".

–ü—Ä–∏–º–µ—Ä 4:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  arr = [ [ { "a": null } ], [ { "b": true } ], [ { "c": "x" } ] ]
–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: [ ["0.a", "0.b", "0.c"], [null, "", ""], ["", true, ""], ["", "", "x"] ]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –º–∞—Å—Å–∏–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "0.a") –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π.

–ü—Ä–∏–º–µ—Ä 5:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  arr = [ {}, {}, {} ]
–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: [ [], [], [], [] ]
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –ö–ª—é—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –Ω–∏ –≤ –æ–¥–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—É—Å—Ç—ã–º —Å—Ç—Ä–æ–∫–∞–º.

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
------------
- 1 <= arr.length <= 1000
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –≤–æ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–∞—Ö –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1000
*/


/*
–î–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é arrayToMatrix, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç
–≤—Ö–æ–¥–Ω–æ–π –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤/–º–∞—Å—Å–∏–≤–æ–≤ –≤ –º–∞—Ç—Ä–∏—Ü—É –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–≤–∏–ª–∞–º:
1. –ü–µ—Ä–≤—ã–π —Ä—è–¥ –º–∞—Ç—Ä–∏—Ü—ã ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π (–ø—É—Ç–∏), –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–º "–≤—ã–ø—Ä—è–º–ª–µ–Ω–∏—è"
   –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞. –ü—Ä–∏ —ç—Ç–æ–º –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤/–º–∞—Å—Å–∏–≤–æ–≤ –∫–ª—é—á–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É.
2. –°—Ç—Ä–æ–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç–∞–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞,
   –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —ç–ª–µ–º–µ–Ω—Ç–µ, –≤ —è—á–µ–π–∫—É –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∏–Ω–∞—á–µ ‚Äî –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞.
3. –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º (—Å–ª–æ–≤–∞—Ä–Ω–æ–º) –ø–æ—Ä—è–¥–∫–µ.
*/

/*
  –§—É–Ω–∫—Ü–∏—è isObject –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–≤–Ω–æ null –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º (–∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º),
*/
function isObject(value) {
  return typeof value === 'object' && value !== null;
}

/*
  –§—É–Ω–∫—Ü–∏—è flatten –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ "–≤—ã–ø—Ä—è–º–ª–µ–Ω–∏—è" –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.
  –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç (–æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤) –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –∫–ª—é—á–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞),
  –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –≥–¥–µ –∫–ª—é—á–∏ –∏–º–µ—é—Ç –≤–∏–¥ –ø—É—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "a.b" –∏–ª–∏ "0.a").

  –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã flatten:
    –í—Ö–æ–¥–Ω–æ–π –æ–±—ä–µ–∫—Ç: { a: { b: 1, c: 2 } }
    –í—ã—Ö–æ–¥–Ω–æ–π –æ–±—ä–µ–∫—Ç: { "a.b": 1, "a.c": 2 }

  –¢–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–∞—Å—Å–∏–≤–∞–º–∏:
    –í—Ö–æ–¥–Ω–æ–π –º–∞—Å—Å–∏–≤: [ { a: 1 }, { b: 2 } ]
    –î–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞: –∏–Ω–¥–µ–∫—Å 0 –∏ –æ–±—ä–µ–∫—Ç { a: 1 } –¥–∞–µ—Ç –∫–ª—é—á "0.a"
    –í—ã—Ö–æ–¥: { "0.a": 1 } –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
*/
function flatten(item, prefix = "") {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –ø–∞—Ä "–∫–ª—é—á: –∑–Ω–∞—á–µ–Ω–∏–µ"
  const result = {};

  // –ï—Å–ª–∏ item —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º, –æ–±—Ö–æ–¥–∏–º –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º
  if (Array.isArray(item)) {
    for (let i = 0; i < item.length; i++) {
      const value = item[i];
      // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –∫–ª—é—á:
      // –ï—Å–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å —É–∂–µ –µ—Å—Ç—å, –æ–±—ä–µ–¥–∏–Ω—è–µ–º –µ–≥–æ —Å –∏–Ω–¥–µ–∫—Å–æ–º —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É,
      // –∏–Ω–∞—á–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–Ω–¥–µ–∫—Å –≤ —Å—Ç—Ä–æ–∫—É.
      // –ü—Ä–∏–º–µ—Ä: prefix = "x", i = 0  => –Ω–æ–≤—ã–π –∫–ª—é—á "x.0"
      const newKey = prefix ? `${prefix}.${i}` : `${i}`;

      // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–≤–Ω–æ null –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º (–∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º),
      // –≤—ã–∑—ã–≤–∞–µ–º flatten —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ.
      if (isObject(value)) {
        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–ª–æ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç —Å —Ç–µ–∫—É—â–∏–º result
        Object.assign(result, flatten(value, newKey));
      } else {
        // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –ø—Ä–∏–º–∏—Ç–∏–≤ (—á–∏—Å–ª–æ, —Å—Ç—Ä–æ–∫–∞, boolean –∏–ª–∏ null),
        // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ result –ø–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–ª—é—á—É.
        result[newKey] = value;
      }
    }
  }
  // –ï—Å–ª–∏ item —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º (–Ω–æ –Ω–µ null), –æ–±—Ö–æ–¥–∏–º –µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞
  else if (isObject(item)) {
    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Å–≤–æ–π—Å—Ç–≤–∞–º –æ–±—ä–µ–∫—Ç–∞
    for (const key in item) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã —Å–≤–æ–π—Å—Ç–≤–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞–ª–æ —Å–∞–º–æ–º—É –æ–±—ä–µ–∫—Ç—É (–∞ –Ω–µ –µ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø—É)
      if (!item.hasOwnProperty(key)) continue;
      // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –∫–ª—é—á:
      // –ï—Å–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–±—ä–µ–¥–∏–Ω—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å –∏ –∫–ª—é—á —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É,
      // –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á –∫–∞–∫ –µ—Å—Ç—å.
      // –ü—Ä–∏–º–µ—Ä: prefix = "a", key = "b"  => –Ω–æ–≤—ã–π –∫–ª—é—á "a.b"
      const value = item[key];
      const newKey = prefix ? `${prefix}.${key}` : key;

      // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º (–∏ –Ω–µ —Ä–∞–≤–Ω–æ null),
      // —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ "–≤—ã–ø—Ä—è–º–ª—è–µ–º" –µ–≥–æ.
      if (isObject(value)) {
        Object.assign(result, flatten(value, newKey));
      } else {
        // –ò–Ω–∞—á–µ, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –ø—Ä–∏–º–∏—Ç–∏–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –ø–æ –Ω–æ–≤–æ–º—É –∫–ª—é—á—É.
        result[newKey] = value;
      }
    }
  }
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –ø–ª–æ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç —Å –∫–ª—é—á–∞–º–∏ –≤ –≤–∏–¥–µ –ø—É—Ç–µ–π.
  return result;
}

/*
  –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è arrayToMatrix –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤/–º–∞—Å—Å–∏–≤–æ–≤ –≤ –º–∞—Ç—Ä–∏—Ü—É.
  –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è:
    1. –ü—Ä–æ–π—Ç–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –∏ –≤—ã–∑–≤–∞—Ç—å flatten, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–ª–æ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç.
    2. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑ –ø–ª–æ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏.
    3. –ü–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –º–∞—Ç—Ä–∏—Ü—ã —Å–¥–µ–ª–∞—Ç—å –º–∞—Å—Å–∏–≤–æ–º –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π.
    4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É, –≥–¥–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞:
        - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ;
        - –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.

  –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:
    –î–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞: [ { b: 1, a: 2 }, { b: 3, a: 4 } ]
    –®–∞–≥ 1: flatten –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–∞—ë—Ç { a: 2, b: 1 }
            flatten –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–∞—ë—Ç { a: 4, b: 3 }
    –®–∞–≥ 2: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏: {"a", "b"} -> –ø–æ—Å–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏: ["a", "b"]
    –®–∞–≥ 3: –§–æ—Ä–º–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –º–∞—Ç—Ä–∏—Ü—ã: ["a", "b"]
    –®–∞–≥ 4: –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
            –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: [2, 1]
            –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞: [4, 3]
    –ò—Ç–æ–≥: [ 
            ["a", "b"], 
            [ 2,   1 ], 
            [ 4,   3 ] 
          ]
*/
function arrayToMatrix(arr) {
  // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ "–≤—ã–ø—Ä—è–º–ª–µ–Ω–∏—è" –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.
  const flatArr = [];
  // Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π (–ø—É—Ç–∏), –≤—Å—Ç—Ä–µ—á–∞—é—â–∏—Ö—Å—è –≤–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö.
  const columnsSet = new Set();

  // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
  for (const item of arr) {
    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é flatten –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    const flatObj = flatten(item);
    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø–ª–æ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç –≤ –º–∞—Å—Å–∏–≤ flatArr
    flatArr.push(flatObj);
    // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ –≤—ã–ø—Ä—è–º–ª–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ Set,
    // —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π.
    for (const key in flatObj) {
      columnsSet.add(key);
    }
  }

  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º Set —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ –º–∞—Å—Å–∏–≤ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –µ–≥–æ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é (–ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏)
  const columns = Array.from(columnsSet).sort();

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é –º–∞—Ç—Ä–∏—Ü—É –∏ –ø–æ–º–µ—â–∞–µ–º –≤ –Ω–µ—ë –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–∫–ª—é—á–µ–π)
  const matrix = [];
  matrix.push(columns);

  // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–ø—Ä—è–º–ª–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –º–∞—Ç—Ä–∏—Ü—ã
  for (const flatObj of flatArr) {
    // –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Å–æ–∑–¥–∞—ë–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –∫—É–¥–∞ –ø–æ–º–µ—Å—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π
    const row = [];
    // –û–±—Ö–æ–¥–∏–º –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä—è–¥–∞ (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏)
    for (const col of columns) {
      // –ï—Å–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ,
      // –∏–Ω–∞—á–µ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
      row.push(
        flatObj.hasOwnProperty(col) ? flatObj[col] : ""
      );
    }
    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ –º–∞—Ç—Ä–∏—Ü—É
    matrix.push(row);
  }

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é –º–∞—Ç—Ä–∏—Ü—É —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
  return matrix;
}




















// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è assert, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–∞—è –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}

/* –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ arrayToMatrix */
const tests = [
  {
    description: "–ù–µ–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã",
    async test() {
      const arr = [{ b: 1, a: 2 }, { b: 3, a: 4 }];
      const expected = [["a", "b"], [2, 1], [4, 3]];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–°–º–µ—à–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∏ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç",
    async test() {
      const arr = [{ a: 1, b: 2 }, { c: 3, d: 4 }, {}];
      const expected = [
        ["a", "b", "c", "d"],
        [1, 2, "", ""],
        ["", "", 3, 4],
        ["", "", "", ""]
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã",
    async test() {
      const arr = [{ a: { b: 1, c: 2 } }, { a: { b: 3, d: 4 } }];
      const expected = [
        ["a.b", "a.c", "a.d"],
        [1, 2, ""],
        [3, "", 4]
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–ú–∞—Å—Å–∏–≤—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –æ–±—ä–µ–∫—Ç—ã",
    async test() {
      const arr = [[{ a: null }], [{ b: true }], [{ c: "x" }]];
      const expected = [
        ["0.a", "0.b", "0.c"],
        [null, "", ""],
        ["", true, ""],
        ["", "", "x"]
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–ü—É—Å—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã",
    async test() {
      const arr = [{}, {}, {}];
      const expected = [
        [],
        [],
        [],
        []
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–°–º–µ—à–∞–Ω–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
    async test() {
      const arr = [{ x: [{ y: "test" }, { z: 5 }] }];
      const expected = [
        ["x.0.y", "x.1.z"],
        ["test", 5]
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
  {
    description: "–°–ª–æ–∂–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤",
    async test() {
      const arr = [
        { a: 1, b: { x: 10 } },
        { b: { y: 20 }, c: [{ d: 30 }] }
      ];
      const expected = [
        ["a", "b.x", "b.y", "c.0.d"],
        [1, 10, "", ""],
        ["", "", 20, 30]
      ];
      const result = arrayToMatrix(arr);
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    },
  },
];

/* –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ */
(async () => {
  console.log("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è arrayToMatrix...");
  let hasErrors = false;

  for (let i = 0; i < tests.length; i++) {
    try {
      await tests[i].test();
      console.log(`‚úîÔ∏è  –¢–µ—Å—Ç ${i + 1} –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
    } catch (e) {
      hasErrors = true;
      console.error(`‚ùå –¢–µ—Å—Ç ${i + 1} –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
      console.error(e);
    }
  }

  if (hasErrors) {
    console.error("‚ùó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π.");
  } else {
    console.log("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è arrayToMatrix –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.");
  }
})();