/*
  –ó–∞–¥–∞—á–∞: LeetCode 2759. Convert JSON String to Object

  –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:
  –î–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ str, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ parsedStr,
  –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º, –º–∞—Å—Å–∏–≤–æ–º, —Å—Ç—Ä–æ–∫–æ–π, —á–∏—Å–ª–æ–º, –±—É–ª–µ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏–ª–∏ null.
  –°—Ç—Ä–æ–∫–∞ str –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Å–∏–º–≤–æ–ª–æ–≤ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
  –ó–∞–¥–∞—á—É –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ JSON.parse.

  –ü—Ä–∏–º–µ—Ä—ã:
  1) –í–≤–æ–¥: str = '{"a":2,"b":[1,2,3]}'
    –í—ã–≤–æ–¥: { a: 2, b: [1,2,3] }
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π JSON-—Å—Ç—Ä–æ–∫–µ.

  2) –í–≤–æ–¥: str = 'true'
    –í—ã–≤–æ–¥: true
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–∂–µ –¥–æ–ø—É—Å—Ç–∏–º—ã.

  3) –í–≤–æ–¥: str = '[1,5,"false",{"a":2}]'
    –í—ã–≤–æ–¥: [1,5,"false",{"a":2}]
    –ü–æ—è—Å–Ω–µ–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π JSON-—Å—Ç—Ä–æ–∫–µ.

  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  - str —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π JSON-—Å—Ç—Ä–æ–∫–æ–π
  - 1 <= str.length <= 10^5
*/




function jsonParse(str) {
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª–∏–Ω—É –≤—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é n
  const n = str.length;

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å i –Ω–∞ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –≤ —Å—Ç—Ä–æ–∫–µ
  let i = 0;

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –ª–∏—Ç–µ—Ä–∞–ª–∞ true
  function parseTrue() {
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º 4 —Å–∏–º–≤–æ–ª–∞: 't','r','u','e'
    i += 4;
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ true
    return true;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –ª–∏—Ç–µ—Ä–∞–ª–∞ false
  function parseFalse() {
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º 5 —Å–∏–º–≤–æ–ª–æ–≤: 'f','a','l','s','e'
    i += 5;
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ false
    return false;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –ª–∏—Ç–µ—Ä–∞–ª–∞ null
  function parseNull() {
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º 4 —Å–∏–º–≤–æ–ª–∞: 'n','u','l','l'
    i += 4;
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ null
    return null;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ —á–∏—Å–ª–∞
  function parseNumber() {
    // –ë—É—Ñ–µ—Ä –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ —á–∏—Å–ª–∞
    let s = '';

    // –¶–∏–∫–ª –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
    while (i < n) {
      // –°—á–∏—Ç–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
      const c = str[i];

      // –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –æ–¥–∏–Ω –∏–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π —á–∏—Å–ª–∞:
      // ','  ‚Äî –∑–∞–ø—è—Ç–∞—è –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –º–∞—Å—Å–∏–≤–∞ –∏–ª–∏
      //        —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –æ–±—ä–µ–∫—Ç–∞
      // '}'  ‚Äî –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Ñ–∏–≥—É—Ä–Ω–∞—è —Å–∫–æ–±–∫–∞, –∫–æ–Ω–µ—Ü –æ–±—ä–µ–∫—Ç–∞
      // ']'  ‚Äî –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Å–∫–æ–±–∫–∞, –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞
      if (c === ',' || c === '}' || c === ']') {
        // –ü—Ä–µ—Ä—ã–≤–∞–µ–º —Å–±–æ—Ä —Ü–∏—Ñ—Ä
        break;
      }

      // –î–æ–±–∞–≤–ª—è–µ–º —Ü–∏—Ñ—Ä—É/—Ç–æ—á–∫—É/–∑–Ω–∞–∫
      s += c;
      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–∏–º–≤–æ–ª—É
      i++;
    }

    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
    return Number(s);
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö
  function parseString() {
    // –ë—É—Ñ–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ç—Ä–æ–∫–∏
    let s = '';
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∫–∞–≤—ã—á–∫—É
    i++;

    // –¶–∏–∫–ª –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
    while (i < n) {
      // –¢–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
      const c = str[i];

      // –ï—Å–ª–∏ —ç—Ç–æ –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è –∫–∞–≤—ã—á–∫–∞
      if (c === '"') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—ë
        i++;
        // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫–∏
        break;
      }

      // –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω —Å–∏–º–≤–æ–ª —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      if (c === '\\') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–º–≤–æ–ª '\'
        i++;
        // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Å–∏–º–≤–æ–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        s += str[i];
      } else {
        // –ò–Ω–∞—á–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
        s += c;
      }

      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–∏–º–≤–æ–ª—É
      i++;
    }

    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
    return s;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –º–∞—Å—Å–∏–≤–∞
  function parseArray() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤-—Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const arr = [];
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é '['
    i++;

    // –¶–∏–∫–ª –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
    while (i < n) {
      // –¢–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
      const c = str[i];

      // –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –∑–∞–∫—Ä—ã–≤–∞—é—â—É—é ']'
      if (c === ']') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—ë
        i++;
        // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–∑–±–æ—Ä –º–∞—Å—Å–∏–≤–∞
        break;
      }

      // –ï—Å–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤
      if (c === ',') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º ','
        i++;
        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
        continue;
      }

      // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
      const value = parseValue();
      // –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤
      arr.push(value);
    }

    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≥–æ—Ç–æ–≤—ã–π –º–∞—Å—Å–∏–≤
    return arr;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞
  function parseObject() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç-—Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const obj = {};
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é '{'
    i++;

    // –¶–∏–∫–ª –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–æ–∫–∏
    while (i < n) {
      // –¢–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
      const c = str[i];

      // –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –∑–∞–∫—Ä—ã–≤–∞—é—â—É—é '}'
      if (c === '}') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—ë
        i++;
        // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ä–∞–∑–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞
        break;
      }

      // –ï—Å–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
      if (c === ',') {
        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º ','
        i++;
        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
        continue;
      }

      // –†–∞–∑–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É-–∫–ª—é—á
      const key = parseString();
      // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–º–≤–æ–ª ':' –º–µ–∂–¥—É –∫–ª—é—á–æ–º –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º
      i++;

      // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–∞–∑–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
      const value = parseValue();
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –æ–±—ä–µ–∫—Ç–µ
      obj[key] = value;
    }

    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
    return obj;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ —Ä–∞–∑–±–æ—Ä–∞ –ø–æ –ø–µ—Ä–≤–æ–º—É —Å–∏–º–≤–æ–ª—É
  function parseValue() {
    // –¢–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª
    const c = str[i];

    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–æ–π —Ä–∞–∑–±–æ—Ä –≤—ã–∑—ã–≤–∞—Ç—å
    switch (c) {
      case '{':
        return parseObject();
      case '[':
        return parseArray();
      case '"':
        return parseString();
      case 't':
        return parseTrue();
      case 'f':
        return parseFalse();
      case 'n':
        return parseNull();
      default:
        return parseNumber();
    }
  }

  // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞–∑–±–æ—Ä —Å –ø–µ—Ä–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  return parseValue();
}
















// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è assert, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–∞—è –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}

/*
  –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ jsonParse.
*/
const tests = [
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞",
    async test() {
      const input = "12345";
      const result = jsonParse(input);
      const expected = 12345;
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${expected}, –ø–æ–ª—É—á–µ–Ω–æ ${result}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏ –¥—Ä–æ–±–Ω–æ–≥–æ —á–∏—Å–ª–∞",
    async test() {
      const input = "-12.34";
      const result = jsonParse(input);
      const expected = -12.34;
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${expected}, –ø–æ–ª—É—á–µ–Ω–æ ${result}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏",
    async test() {
      const input = "\"hello\"";
      const result = jsonParse(input);
      const expected = "hello";
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫–∏ —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞–≤—ã—á–∫–æ–π",
    async test() {
      const input = "\"he\\\"llo\"";
      const result = jsonParse(input);
      const expected = "he\"llo";
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ null",
    async test() {
      assert(jsonParse("true") === true, `–û–∂–∏–¥–∞–ª–æ—Å—å true, –ø–æ–ª—É—á–µ–Ω–æ ${jsonParse("true")}`);
      assert(jsonParse("false") === false, `–û–∂–∏–¥–∞–ª–æ—Å—å false, –ø–æ–ª—É—á–µ–Ω–æ ${jsonParse("false")}`);
      assert(jsonParse("null") === null, `–û–∂–∏–¥–∞–ª–æ—Å—å null, –ø–æ–ª—É—á–µ–Ω–æ ${jsonParse("null")}`);
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —á–∏—Å–µ–ª",
    async test() {
      const input = "[1,2,3]";
      const result = jsonParse(input);
      const expected = [1, 2, 3];
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤",
    async test() {
      const input = "[1,[2,3],4]";
      const result = jsonParse(input);
      const expected = [1, [2, 3], 4];
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Å—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏",
    async test() {
      const input = "{\"a\":1,\"b\":\"text\",\"c\":true}";
      const result = jsonParse(input);
      const expected = { a: 1, b: "text", c: true };
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏ –º–∞—Å—Å–∏–≤–∞ –≤ –æ–±—ä–µ–∫—Ç–µ",
    async test() {
      const input = "{\"nested\":{\"x\":-1.5,\"y\":[false,null]}}";
      const result = jsonParse(input);
      const expected = { nested: { x: -1.5, y: [false, null] } };
      assert(
        JSON.stringify(result) === JSON.stringify(expected),
        `–û–∂–∏–¥–∞–ª–æ—Å—å ${JSON.stringify(expected)}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(result)}`
      );
    }
  },
  {
    description: "–ü–∞—Ä—Å–∏–Ω–≥ –ø—É—Å—Ç—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π",
    async test() {
      assert(
        JSON.stringify(jsonParse("[]")) === JSON.stringify([]),
        `–û–∂–∏–¥–∞–ª–æ—Å—å [], –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(jsonParse("[]"))}`
      );
      assert(
        JSON.stringify(jsonParse("{}")) === JSON.stringify({}),
        `–û–∂–∏–¥–∞–ª–æ—Å—å {}, –ø–æ–ª—É—á–µ–Ω–æ ${JSON.stringify(jsonParse("{}"))}`
      );
    }
  }
];

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
(async () => {
  console.log("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è jsonParse...");
  let hasErrors = false;

  for (let i = 0; i < tests.length; i++) {
    try {
      await tests[i].test();
      console.log(`‚úîÔ∏è  –¢–µ—Å—Ç ${i + 1} –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
    } catch (e) {
      hasErrors = true;
      console.error(`‚ùå –¢–µ—Å—Ç ${i + 1} –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
      // –í—ã–≤–æ–¥–∏–º –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ (—Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ç–µ–∫)
      console.error(e);
    }
  }

  if (hasErrors) {
    console.error("‚ùó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π.");
  } else {
    console.log("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è jsonParse –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.");
  }
})();
