/*
  LeetCode 2805. Custom Interval
  
  –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é customInterval(fn, delay, period), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:
    - fn: —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è,
    - delay: —á–∏—Å–ª–æ, –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö,
    - period: —á–∏—Å–ª–æ, –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö.
  –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä id.

  customInterval –≤—ã–∑—ã–≤–∞–µ—Ç fn —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏, –≤—ã—á–∏—Å–ª—è–µ–º—ã–º–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:
    delay + period * count
  –≥–¥–µ count ‚Äî –Ω–æ–º–µ—Ä –≤—ã–∑–æ–≤–∞ (–Ω–∞—á–∏–Ω–∞—è —Å 0).

  –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é customClearInterval(id), –∫–æ—Ç–æ—Ä–∞—è –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É
  –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É id (–≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω–æ–º—É customInterval) –æ—Ç–º–µ–Ω—è–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–µ
  –≤—ã–∑–æ–≤—ã fn.

  –ü—Ä–∏–º–µ—Ä 1:
    –í–≤–æ–¥:  delay = 50, period = 20, cancelTime = 225
    –í—ã–≤–æ–¥: [50, 120, 210]
    –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
      const t      = performance.now()
      const result = []
      const fn     = () => {
        result.push(Math.floor(performance.now() - t))
      }
      const id = customInterval(fn, delay, period)
      setTimeout(() => {
        customClearInterval(id)
      }, 225)

      50 + 20 * 0 = 50   ‚Üí 50 ms    (1-–π –≤—ã–∑–æ–≤)
      50 + 20 * 1 = 70   ‚Üí 50+70=120 ms (2-–π –≤—ã–∑–æ–≤)
      50 + 20 * 2 = 90   ‚Üí 120+90=210 ms (3-–π –≤—ã–∑–æ–≤)

  –ü—Ä–∏–º–µ—Ä 2:
    –í–≤–æ–¥:  delay = 20, period = 20, cancelTime = 150
    –í—ã–≤–æ–¥: [20, 60, 120]
    –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
      20 + 20 * 0 = 20   ‚Üí 20 ms    (1-–π –≤—ã–∑–æ–≤)
      20 + 20 * 1 = 40   ‚Üí 20+40=60 ms  (2-–π –≤—ã–∑–æ–≤)
      20 + 20 * 2 = 60   ‚Üí 60+60=120 ms (3-–π –≤—ã–∑–æ–≤)

  –ü—Ä–∏–º–µ—Ä 3:
    –í–≤–æ–¥:  delay = 100, period = 200, cancelTime = 500
    –í—ã–≤–æ–¥: [100, 400]
    –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
      100 + 200 * 0 = 100   ‚Üí 100 ms   (1-–π –≤—ã–∑–æ–≤)
      100 + 200 * 1 = 300   ‚Üí 100+300=400 ms (2-–π –≤—ã–∑–æ–≤)

  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
    20 ‚â§ delay, period ‚â§ 250
    20 ‚â§ cancelTime ‚â§ 1000
*/



/*
  –°–æ–∑–¥–∞–µ–º Map –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–ª—é—á–∞–º.
  –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –æ—Ç–º–µ–Ω—è—Ç—å –∫–∞–∂–¥—ã–π ‚Äú–∏–Ω—Ç–µ—Ä–≤–∞–ª‚Äù –æ—Ç–¥–µ–ª—å–Ω–æ.
*/
const intervalMap = new Map();

/*
  –û–ø—Ä–µ–¥–µ–ª—è–µ–º customInterval, –∫–æ—Ç–æ—Ä–∞—è –∏–º–∏—Ç–∏—Ä—É–µ—Ç setInterval —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —à–∞–≥–æ–º.
  fn     ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å.
  delay  ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –≤—ã–∑–æ–≤–æ–º fn.
  period ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, –¥–æ–±–∞–≤–ª—è–µ–º–∞—è –∫ –∫–∞–∂–¥–æ–π –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.
*/
function customInterval(fn, delay, period) {

  /*
    –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —É–∂–µ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ fn().
    –ù—É–∂–µ–Ω –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞—Å—Ç—É—â–µ–π –∑–∞–¥–µ—Ä–∂–∫–∏: 
    delay + period * count.
  */
  let count = 0;

  /*
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–≤–∏—Ç –Ω–æ–≤—ã–π —Ç–∞–π–º–∞—É—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è fn().
  */
  function recursiveTimeout() {

    /*
      –í—ã—á–∏—Å–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:
      –ø–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è ‚Üí delay + period*0,
      –≤—Ç–æ—Ä–∞—è       ‚Üí delay + period*1, –∏ —Ç.–¥.
    */
    const timeoutDelay = delay + period * count;

    /*
      –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ ID –≤ intervalMap.
      –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –æ—Ç–º–µ–Ω–∞, –º—ã –∑–Ω–∞–µ–º, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ —Ç–∞–π–º–∞—É—Ç –æ—Ç–º–µ–Ω–∏—Ç—å.
    */
    intervalMap.set(
      // –∫–ª—é—á ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
      id,

      /*
        —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥–∞–µ–º –≤ setTimeout
        1. –≤—ã–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é
        2. —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∏—Ç–µ—Ä–∞—Ü–∏–π
        3. –ø–ª–∞–Ω–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫
        –∑–∞–¥–∞–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É
      */
      setTimeout(() => {
        fn();
        count++;
        recursiveTimeout();
      }, timeoutDelay)
    );
  }

  /*
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º '–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π' –∫–ª—é—á –¥–ª—è —ç—Ç–æ–π —Å–µ—Ä–∏–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤.
    –ò—Å–ø–æ–ª—å–∑—É–µ–º Date.now(): –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤—ã–∑–æ–≤–µ—Ç customInterval —Ä–µ–∂–µ —á–µ–º —Ä–∞–∑ –≤ 1 –º—Å,
    —Ç–æ –∫–ª—é—á–∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—Å—è.
  */
  const id = Date.now();

  // –°—Ä–∞–∑—É –∂–µ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π —Ç–∞–π–º–∞—É—Ç.
  recursiveTimeout();

  /*
    –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª—é—á, —á—Ç–æ–±—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª.
  */
  return id;
}

/*
  –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ customInterval –ø–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.
*/
function customClearInterval(id) {

  /*
   –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ –Ω–∞—à–µ–π –∫–∞—Ä—Ç–µ —Ç–∞–π–º–∞—É—Ç —Å —Ç–∞–∫–∏–º –∫–ª—é—á–æ–º.
  */
  if (!intervalMap.has(id)) return;

  // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π ID —Ç–∞–π–º–∞—É—Ç–∞ –∏ –æ—á–∏—â–∞–µ–º –µ–≥–æ.
  clearTimeout(intervalMap.get(id));

  /*
    –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –∏–∑ Map, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å ‚Äú–º—É—Å–æ—Ä‚Äù –∏ –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.
  */
  intervalMap.delete(id);
}










// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è assert, –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—â–∞—è –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.
function assert(condition, message) {
  if (!condition) {
    throw new Error(message);
  }
}

// –°–æ—Ö—Ä–∞–Ω–∏–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤.
const originalSetTimeout = global.setTimeout;
const originalClearTimeout = global.clearTimeout;

// –ú–∞—Å—Å–∏–≤ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è customInterval –∏ customClearInterval.
const tests = [
  {
    description: "customInterval –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ–≤–æ–π id –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ map",
    async test() {
      let scheduled = [];
      let cleared = [];
      // –ü–æ–¥–º–µ–Ω—è–µ–º setTimeout –∏ clearTimeout.
      global.setTimeout = (cb, t) => {
        scheduled.push({ cb, t });
        return scheduled.length - 1;
      };
      global.clearTimeout = (id) => {
        cleared.push(id);
      };
      // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
      intervalMap.clear();

      let callCount = 0;
      const fn = () => { callCount++; };

      const id = customInterval(fn, 100, 50);

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π id
      assert(typeof id === "number", `–û–∂–∏–¥–∞–ª—Å—è —á–∏—Å–ª–æ–≤–æ–π id, –ø–æ–ª—É—á–µ–Ω–æ ${typeof id}`);
      assert(intervalMap.has(id), "id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ intervalMap –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞");

      // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç
      assert(scheduled.length === 1, `–û–∂–∏–¥–∞–ª–æ—Å—å 1 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç, –Ω–∞–π–¥–µ–Ω–æ ${scheduled.length}`);
      assert(scheduled[0].t === 100, `–û–∂–∏–¥–∞–ª–∞—Å—å –∑–∞–¥–µ—Ä–∂–∫–∞ 100, –ø–æ–ª—É—á–µ–Ω–∞ ${scheduled[0].t}`);

      // –≠–º—É–ª–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤
      scheduled[0].cb();
      assert(callCount === 1, `fn –¥–æ–ª–∂–µ–Ω –±—ã–ª –≤—ã–∑–≤–∞—Ç—å—Å—è 1 —Ä–∞–∑, –≤—ã–∑–≤–∞–Ω ${callCount}`);
      // –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—ã–∑–æ–≤–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Å delay + period*1 = 150
      assert(scheduled.length === 2, `–û–∂–∏–¥–∞–ª–æ—Å—å 2 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–∞, –Ω–∞–π–¥–µ–Ω–æ ${scheduled.length}`);
      assert(scheduled[1].t === 150, `–û–∂–∏–¥–∞–ª–∞—Å—å –∑–∞–¥–µ—Ä–∂–∫–∞ 150, –ø–æ–ª—É—á–µ–Ω–∞ ${scheduled[1].t}`);

      // –≠–º—É–ª–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤
      scheduled[1].cb();
      assert(callCount === 2, `fn –¥–æ–ª–∂–µ–Ω –±—ã–ª –≤—ã–∑–≤–∞—Ç—å—Å—è 2 —Ä–∞–∑–∞, –≤—ã–∑–≤–∞–Ω ${callCount}`);
      // –ü–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–≥–æ –≤—ã–∑–æ–≤–∞ –∑–∞–ø–ª–∞–Ω–∏—Ç—Å—è –µ—â—ë –æ–¥–∏–Ω —Å delay + period*2 = 200
      assert(scheduled.length === 3, `–û–∂–∏–¥–∞–ª–æ—Å—å 3 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–∞, –Ω–∞–π–¥–µ–Ω–æ ${scheduled.length}`);
      assert(scheduled[2].t === 200, `–û–∂–∏–¥–∞–ª–∞—Å—å –∑–∞–¥–µ—Ä–∂–∫–∞ 200, –ø–æ–ª—É—á–µ–Ω–∞ ${scheduled[2].t}`);

      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã –∏ –æ—á–∏—â–∞–µ–º map
      global.setTimeout = originalSetTimeout;
      global.clearTimeout = originalClearTimeout;
      intervalMap.clear();
    },
  },
  {
    description: "customClearInterval –æ—Ç–º–µ–Ω—è–µ—Ç –ø–µ—Ä–≤—ã–π –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç",
    async test() {
      let scheduled = [];
      let cleared = [];
      global.setTimeout = (cb, t) => {
        scheduled.push({ cb, t });
        return scheduled.length - 1;
      };
      global.clearTimeout = (id) => {
        cleared.push(id);
      };
      intervalMap.clear();

      const fn = () => { };
      const id = customInterval(fn, 30, 20);

      // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç —Å id = 0
      assert(scheduled.length === 1, "–¢–∞–π–º–∞—É—Ç –Ω–µ –±—ã–ª –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω");
      assert(scheduled[0].t === 30, `–û–∂–∏–¥–∞–ª–∞—Å—å –∑–∞–¥–µ—Ä–∂–∫–∞ 30, –ø–æ–ª—É—á–µ–Ω–∞ ${scheduled[0].t}`);

      // –û—Ç–º–µ–Ω—è–µ–º –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
      customClearInterval(id);

      // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω clearTimeout —Å —Ç–µ–º –∂–µ id
      assert(cleared.length === 1, `–û–∂–∏–¥–∞–ª–æ—Å—å 1 –≤—ã–∑–æ–≤ clearTimeout, –Ω–∞–π–¥–µ–Ω–æ ${cleared.length}`);
      assert(cleared[0] === 0, `–û–∂–∏–¥–∞–ª—Å—è clearTimeout(0), –ø–æ–ª—É—á–µ–Ω clearTimeout(${cleared[0]})`);
      assert(!intervalMap.has(id), "id –Ω–µ –¥–æ–ª–∂–µ–Ω –±–æ–ª—å—à–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ intervalMap");

      global.setTimeout = originalSetTimeout;
      global.clearTimeout = originalClearTimeout;
      intervalMap.clear();
    },
  },
  {
    description: "customClearInterval –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –æ—Ç–º–µ–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ç–∞–π–º–∞—É—Ç",
    async test() {
      let scheduled = [];
      let cleared = [];
      global.setTimeout = (cb, t) => {
        scheduled.push({ cb, t });
        return scheduled.length - 1;
      };
      global.clearTimeout = (id) => {
        cleared.push(id);
      };
      intervalMap.clear();

      let callCount = 0;
      const fn = () => { callCount++; };
      const id = customInterval(fn, 50, 25);

      // –≠–º—É–ª–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π —Ç–∞–π–º–∞—É—Ç
      scheduled[0].cb();
      assert(callCount === 1, "fn –¥–æ–ª–∂–µ–Ω –±—ã–ª –≤—ã–∑–≤–∞—Ç—å—Å—è 1 —Ä–∞–∑ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ cb");

      // –¢–µ–ø–µ—Ä—å –≤ scheduled[1] –ª–µ–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ç–∞–π–º–∞—É—Ç —Å id = 1
      assert(scheduled.length === 2, "–û–∂–∏–¥–∞–ª–æ—Å—å 2 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–∞");
      assert(scheduled[1].t === 75, `–û–∂–∏–¥–∞–ª–∞—Å—å –∑–∞–¥–µ—Ä–∂–∫–∞ 75, –ø–æ–ª—É—á–µ–Ω–∞ ${scheduled[1].t}`);

      // –û—Ç–º–µ–Ω—è–µ–º –¥–æ –≤—Ç–æ—Ä–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
      customClearInterval(id);
      assert(cleared.length === 1, `–û–∂–∏–¥–∞–ª–æ—Å—å 1 –≤—ã–∑–æ–≤ clearTimeout, –Ω–∞–π–¥–µ–Ω–æ ${cleared.length}`);
      assert(cleared[0] === 1, `–û–∂–∏–¥–∞–ª—Å—è clearTimeout(1), –ø–æ–ª—É—á–µ–Ω clearTimeout(${cleared[0]})`);
      assert(!intervalMap.has(id), "id –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ intervalMap –ø–æ—Å–ª–µ clear");

      global.setTimeout = originalSetTimeout;
      global.clearTimeout = originalClearTimeout;
      intervalMap.clear();
    },
  },
  {
    description: "customClearInterval —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º id –Ω–µ –±—Ä–æ—Å–∞–µ—Ç –æ—à–∏–±–æ–∫",
    async test() {
      // –ü—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º id
      customClearInterval(123456);
      // –ï—Å–ª–∏ –Ω–µ —É–ø–∞–ª–æ ‚Äî —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
    },
  },
];

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
(async () => {
  console.log("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è customInterval –∏ customClearInterval...");
  let hasErrors = false;
  for (let i = 0; i < tests.length; i++) {
    try {
      await tests[i].test();
      console.log(`‚úîÔ∏è  –¢–µ—Å—Ç ${i + 1} –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
    } catch (e) {
      hasErrors = true;
      console.error(`‚ùå –¢–µ—Å—Ç ${i + 1} –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: ${tests[i].description}`);
      console.error(e);
    }
  }
  if (hasErrors) {
    console.error("‚ùó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π.");
  } else {
    console.log("üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è customInterval –∏ customClearInterval –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.");
  }
})();
